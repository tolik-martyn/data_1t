# Логическая структура БД для создания "Библиотеки"

## Оглавление

1. [Сущности в разрабатываемой БД](#сущности-в-разрабатываемой-бд)
2. [Связи между сущностями](#связи-между-сущностями)
3. [Первичные и внешние ключи](#первичные-и-внешние-ключи)

## Сущности в разрабатываемой БД

В нашей базе данных для "Библиотеки" будут следующие сущности:

1. **Адрес (Address):**
   - `address_id`: int
   - `region`: string
   - `city`: string
   - `street`: string
   - `house`: int
   - `apartment`: int

2. **Список адресов (ListAddress):**
   - `list_address_id`: int
   - `address_id`: int (Foreign Key)
   - `person_id`: int (Foreign Key)
   - `description`: text

3. **Телефон (Phone):**
   - `phone_id`: int
   - `number`: int

4. **Список телефонов (ListPhone):**
   - `list_phone_id`: int
   - `person_id`: int (Foreign Key)
   - `phone_id`: int (Foreign Key)
   - `description`: text

5. **Человек (Person):**
   - `person_id`: int
   - `last_name`: string
   - `first_name`: string

6. **Читатель (Reader):**
   - `reader_id`: int
   - `person_id`: int (Foreign Key)

7. **Автор (Author):**
   - `author_id`: int
   - `person_id`: int (Foreign Key)

8. **Книги-Авторы (BookAuthor):**
   - `book_author_id`: int
   - `author_id`: int (Foreign Key)
   - `book_id`: int (Foreign Key)

9. **Книга (Book):**
   - `book_id`: int
   - `title`: string
   - `publication_year`: date
   - `page_count`: int
   - `price`: decimal
   - `quantity_in_stock`: int

10. **Книги-Издательства (BookPublisher):**
    - `b_p_id`: int
    - `book_id`: int (Foreign Key)
    - `publisher_id`: int (Foreign Key)

11. **Издатель (Publisher):**
    - `publisher_id`: int
    - `publisher_name`: string
    - `city`: string

12. **Выдача книг (BookLoans):**
    - `loan_id`: int
    - `reader_id`: int (Foreign Key)
    - `book_id`: int (Foreign Key)
    - `loan_date`: datetime
    - `return_date`: datetime

## Связи между сущностями

В нашей логической структуре базы данных существуют следующие связи:

1. **Адрес (Address)** связан с **Человеком (Person)** через сущность **Список адресов (ListAddress)**. Эта связь позволяет каждому человеку иметь несколько адресов, например, домашний и рабочий адрес.

2. **Телефон (Phone)** связан с **Человеком (Person)** через сущность **Список телефонов (ListPhone)**. Это позволяет каждому человеку иметь несколько телефонных номеров, например, мобильный и домашний.

3. **Человек (Person)** связан с **Читателем (Reader)** и **Автором (Author)**. Эти связи позволяют установить, что один человек может быть как читателем, так и автором, если это необходимо.

4. **Книга (Book)** связана с **Автором (Author)** через сущность **Книги-Авторы (BookAuthor)**. Это позволяет книгам иметь несколько авторов, так как книга может быть написана несколькими авторами.

5. **Книга (Book)** также связана с **Издательством (Publisher)** через сущность **Книги-Издательства (BookPublisher)**. Эта связь указывает, какое издательство выпустило каждую книгу.

6. **Читатель (Reader)** связан с **Книгой (Book)** через сущность **Выдача книг (BookLoans)**. Эта связь позволяет отслеживать, какие книги взяты на чтение каждым читателем.

Выбор связей основан на логике и потребностях бизнес-модели. Например, использование промежуточных сущностей, таких как **Список адресов (ListAddress)** и **Список телефонов (ListPhone)**, позволяет учитывать множественные адреса и телефоны для одного человека. Связи между **Человеком (Person)** и **Читателем (Reader)**, а также **Человеком (Person)** и **Автором (Author)** позволяют гибко управлять данными о читателях и авторах. Связь между **Книгой (Book)** и **Автором (Author)** через **Книги-Авторы (BookAuthor)** учитывает случай, когда книга имеет несколько соавторов. Связь между **Книгой (Book)** и **Издательством (Publisher)** через **Книги-Издательства (BookPublisher)** позволяет устанавливать, какое издательство выпустило каждую книгу. Наконец, связь между **Читателем (Reader)** и **Книгой (Book)** через **Выдачу книг (BookLoans)** позволяет отслеживать аренду книг читателями.

## Первичные и внешние ключи

В базе данных используются следующие ключи:

1. **Адрес (Address):**
   - Первичный ключ: `address_id` - уникальный идентификатор адреса.
   - Внешние ключи: Нет.

2. **Список адресов (ListAddress):**
   - Первичный ключ: `list_address_id` - уникальный идентификатор записи в списке адресов.
   - Внешний ключ: `address_id` - ссылается на `address_id` в сущности `Address`, устанавливая связь между записью в списке адресов и конкретным адресом.
   - Внешний ключ: `person_id` - ссылается на `person_id` в сущности `Person`, устанавливая связь между записью в списке адресов и конкретным человеком.

3. **Телефон (Phone):**
   - Первичный ключ: `phone_id` - уникальный идентификатор телефона.
   - Внешние ключи: Нет.

4. **Список телефонов (ListPhone):**
   - Первичный ключ: `list_phone_id` - уникальный идентификатор записи в списке телефонов.
   - Внешний ключ: `person_id` - ссылается на `person_id` в сущности `Person`, устанавливая связь между записью в списке телефонов и конкретным человеком.
   - Внешний ключ: `phone_id` - ссылается на `phone_id` в сущности `Phone`, устанавливая связь между записью в списке телефонов и конкретным телефоном.

5. **Человек (Person):**
   - Первичный ключ: `person_id` - уникальный идентификатор человека.
   - Внешние ключи: Нет.

6. **Читатель (Reader):**
   - Первичный ключ: `reader_id` - уникальный идентификатор читателя.
   - Внешний ключ: `person_id` - ссылается на `person_id` в сущности `Person`, устанавливая связь между читателем и конкретным человеком.

7. **Автор (Author):**
   - Первичный ключ: `author_id` - уникальный идентификатор автора.
   - Внешний ключ: `person_id` - ссылается на `person_id` в сущности `Person`, устанавливая связь между автором и конкретным человеком.

8. **Книги-Авторы (BookAuthor):**
   - Первичный ключ: `book_author_id` - уникальный идентификатор записи о связи между книгой и автором.
   - Внешний ключ: `author_id` - ссылается на `author_id` в сущности `Author`, устанавливая связь между записью о связи и конкретным автором.
   - Внешний ключ: `book_id` - ссылается на `book_id` в сущности `Book`, устанавливая связь между записью о связи и конкретной книгой.

9. **Книга (Book):**
   - Первичный ключ: `book_id` - уникальный идентификатор книги.
   - Внешние ключи: Нет.

10. **Книги-Издательства (BookPublisher):**
    - Первичный ключ: `b_p_id` - уникальный идентификатор записи о связи между книгой и издательством.
    - Внешний ключ: `book_id` - ссылается на `book_id` в сущности `Book`, устанавливая связь между записью о связи и конкретной книгой.
    - Внешний ключ: `publisher_id` - ссылается на `publisher_id` в сущности `Publisher`, устанавливая связь между записью о связи и конкретным издательством.

11. **Издатель (Publisher):**
    - Первичный ключ: `publisher_id` - уникальный идентификатор издательства.
    - Внешние ключи: Нет.

12. **Выдача книг (BookLoans):**
    - Первичный ключ: `loan_id` - уникальный идентификатор выдачи книги.
    - Внешний ключ: `reader_id` - ссылается на `reader_id` в сущности `Reader`, устанавливая связь между выдачей книги и конкретным читателем.
    - Внешний ключ: `book_id` - ссылается на `book_id` в сущности `Book`, устанавливая связь между выдачей книги и конкретной книгой.

Эти ключи определены таким образом, чтобы обеспечить целостность данных и связей между сущностями в базе данных. 